<!--
 ! 
 ! Copyright 2005, Sun Microsystems, Inc.
 ! Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">
 ! Apache License, Version 2.0</a>.
 ! 
 !-->
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>

<body text="#000000" bgcolor="#ffffff" link="#9b37cc"
      vlink="#cc1877" alink="#ffffff">
<a name="top">
<title>Release Notes for Fiddler</title>
<center><h1>Fiddler
  <BR>v2.1 Release Notes
</h1></center>
<hr>
<UL>
<H3>Description</H3>
"Fiddler" is the name of the contributed Jini(TM) technology lookup discovery
service implementation from Sun Microsystems. The <i>Jini(TM) Lookup 
Discovery Service Specification</i> is available in <a
href="../specs/html/lds-spec.html">html</a>.
<p>
The specification for Fiddler is defined not only by the <i>Jini(TM) Lookup 
Discovery Service Specification</i>, but also by the API
documentation (generated by the Javadoc(TM) tool) for
<a href="../api/com/sun/jini/fiddler/FiddlerAdmin.html"> <code>com.sun.jini.fiddler.FiddlerAdmin</code></a>
and
<a href="../api/net/jini/admin/Administrable.html"> <code>net.jini.admin.Administrable</code></a>.
<p>

<H3>Changes since the v2.0.1 release</H3>
<dl>

  <dt> <b>Configuration</b>
  <dd> In this release, no new configuration entries have been added, nor have any other
       changes occurred with respect to the configuration.
       <p>
       A full list of supported configuration entries is given in this service's 
       <a href="../api/com/sun/jini/fiddler/package-summary.html#fiddlerConfigEntries"> man page</a>.
       <p>

  <dt> <b>Logging</b>
  <dd> In this release, no changes have occurred with respect to the logging mechanism
       employed by Fiddler; which logs diagnostic information using a separate
       <a href="http://java.sun.com/j2se/1.4/docs/api/java/util/logging/Logger.html"> <code>Logger</code></a>
       for each type of information logged. The name of each logger
       is a dot-separated concatenation of the implementation package name,
       <code>com.sun.jini.fiddler</code>, with a descriptive string. A description of each
       logger used by this service, as well as what information is logged to which
       logger, and at what logging level, is given in this service's 
       <a href="../api/com/sun/jini/fiddler/package-summary.html#fiddlerLoggers"> man page</a>.
       <p>

  <dt> <b>Bug Fixes of Interest</b>
  <dd> A number of bugs have been addressed in this release of Fiddler.
       What follows is a description of those bugs that might be of
       interest:
  <p>

  <dt><b>4874580: FiddlerImpl throws NullPointerException in prepareNewLocators if locs is null</b><dt>
  <dd> When calling the <code>register</code> method, if <code>null</code>
       is passed as the value of the <code>locators</code> parameter,
       a <code>NullPointerException</code> occurs.
       <p>
       This bug has been fixed.
  </dd>
  <p>
  <dt><b>4979612: Fiddler relies on LookupLocator.equals to determine interest in discovered Regs</b><dt>
  <dd> When Fiddler searches through its set of client registrations to 
       determine if any of those registrations are interested in a particular
       previously discovered lookup service, it compares the locators of
       interest from each registration to the locator that is returned by a call
       to <code>getLocator</code> on the discovered lookup service. That
       comparison is done using <code>LookupLocator.equals</code>.
       <p>
       <code>LookupLocator.equals</code> employs a case-insensitive string
       compare of the host names of the locators to determine equality. Thus,
       if one locator is associated with a hostname of "myHost",
       and the other locator is associated with a fully qualified hostname like
       "myHost.myCompany.com", <code>LookupLocator.equals</code> will return
       <code>false</code>, and Fiddler will view as different, locators that
       should actually be considered the same.
       <p>
       To address this bug, the implementation in this release now employs
       the same strategy that <code>URL</code> currently employs. That is,
       it first applies <code>LookupLocator.equals</code> (to do a case-insensitive
       string compare). If the call to <code>LookupLocator.equals</code> returns
       <code>false</code>, then the IP addresses associated with each locator
       are retrieved and compared to determine equality.
  </dd>
  <p>
  <dt><b>4984939: Fiddler threads should guard against lost interrupts</b><dt>
  <dd> Thread subclasses in Fiddler that use logging and do not override the
       <code>Thread.interrupt</code> method to set an "interrupted" field are
       susceptible to lost interrupts. This is because <code>java.util.logging</code>
       swallows internal <code>InterruptedIOException</code>s without setting
       the receiving thread's interrupted status; effectively 'forgetting' the
       interrupt that occurred. The end result is that some of Fiddler's threads
       could endlessly loop instead of terminate, causing shutdown processing
       in Fiddler to hang.
       <p>
       This bug has been fixed.
  </dd>
  <p>
  <dt><b>5042473: FiddlerImpl.SetLocatorsTask handles NO_LOCATORS incorrectly</b><dt>
  <dd> Prior to this release, when a client requested that locator discovery
       be "turned off" by requesting the replacement of a registration's 
       locators-of-interest with the empty set (through an invocation of
       the <code>setLocators</code> method), the result was the opposite
       of what the specification prescribes. That is, the
       locators-of-interest were <b>not</b> replaced at all.
       <p>
       This bug has been fixed.
  </dd>
  <p>
  <dt><b>5049735: Fiddler should properly handle remote calls that arrive before init completes</b><dt>
  <dd> Prior to this release, Fiddler contained no logic to ensure that
       remote calls received before initialization completes would be handled
       properly. Problems could occur, for example, if an instance of Fiddler is
       run with a well-known endpoint that was used (and advertised) by a
       previous instance of Fiddler.
       <p>
       To address this issue, Fiddler now handles such "early" calls by blocking
       until initialization completes.
  </dd>
  <p>
  <dt><b>6226306: Fiddler should allow null loginContext config entry, performing no JAAS login when null</b><dt>
  <dd> Prior to this release, if Fiddler's configuration included a
       <b><i>loginContext</i></b> entry, Fiddler would require that
       entry to be non-<code>null</code>; throwing an exception if
       a <code>null</code> value were entered. (Note that if the entry
       were simply absent from the configuration, Fiddler interpretted
       this as an indication that no JAAS login should be performed.) 
       <p>
       To address this issue, Fiddler now interprets a <code>null</code>
       value for the <i>loginContext</i> entry, as well as an absent
       entry, as an indication that a JAAS login should not be performed.
  </dd>
  <p>
  <dt> <b>Notes Of Interest</b>
  <dd> 
       <p>
       <b>Fiddler Has 3 Modes of Execution</b>
       <p>
       <ul>
         <li> <i>Transient</i> - Fiddler does not persist its state and is not activatable
         <li> <i>Nonactivatable</i> - Fiddler does persist its state but is not activatable
         <li> <i>Activatable</i> - Fiddler persists its state and is activatable
       </ul>
       For details, see the
       <a href="../api/com/sun/jini/fiddler/package-summary.html"> <code>com.sun.jini.fiddler</code></a>
       package documentation.
       <p>

</dl>

<!-- No issues for now
<p>
<H3>Known Issues (& Workarounds)</H3>
    Currently, there are no known issues regarding this implementation of
    the lookup discovery service.
<p>
-->

</ul>
<hr>
Copyright 2005, Sun Microsystems, Inc.<br>
Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">
Apache License, Version 2.0</a>.

</body>
</html>



